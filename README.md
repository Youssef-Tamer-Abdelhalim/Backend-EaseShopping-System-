# ๐ EaseShopping E-Commerce API

<div align="center">

![Node.js](https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=nodedotjs&logoColor=white)
![Express.js](https://img.shields.io/badge/Express.js-000000?style=for-the-badge&logo=express&logoColor=white)
![MongoDB](https://img.shields.io/badge/MongoDB-47A248?style=for-the-badge&logo=mongodb&logoColor=white)
![JWT](https://img.shields.io/badge/JWT-000000?style=for-the-badge&logo=JSON%20web%20tokens&logoColor=white)
![Stripe](https://img.shields.io/badge/Stripe-008CDD?style=for-the-badge&logo=stripe&logoColor=white)

**RESTful API ูุชูุงููุฉ ููุชุฌุฑ ุฅููุชุฑููู ูุจููุฉ ุจุงุณุชุฎุฏุงู Node.js ู Express.js ู MongoDB**

[ุงููููุฒุงุช](#-ุงููููุฒุงุช) โข
[ุงูุชุซุจูุช](#-ุงูุชุซุจูุช) โข
[ุงูู API](#-ุงูู-api-endpoints) โข
[ุงููุณุงููุฉ](#-ุงููุณุงููุฉ)

</div>

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

EaseShopping ูู ูุธุงู API ูุชูุงูู ูุฅุฏุงุฑุฉ ูุชุฌุฑ ุฅููุชุฑููู ูููุฑ ุฌููุน ุงูุฎุฏูุงุช ุงูุฃุณุงุณูุฉ ูุซู:

- ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงููุตุงุฏูุฉ
- ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช ูุงูุชุตูููุงุช ูุงูุนูุงูุงุช ุงูุชุฌุงุฑูุฉ
- ุณูุฉ ุงูุชุณูู ูุงูุทูุจุงุช
- ูุธุงู ุงูุชููููุงุช ูุงููุฑุงุฌุนุงุช
- ุงูุฏูุน ุงูุฅููุชุฑููู ุนุจุฑ Stripe
- ูุฃูุซุฑ...

---

## โจ ุงููููุฒุงุช

### ๐ ุงููุตุงุฏูุฉ ูุงูุฃูุงู

- ุชุณุฌูู ุงููุณุชุฎุฏููู ูุชุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู JWT
- ูุธุงู ุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู (User, Manager, Admin)
- Rate Limiting ููุญูุงูุฉ ูู ูุฌูุงุช DDoS
- CORS Security ูุน ุฏุนู Origins ูุชุนุฏุฏุฉ
- Security Headers ููุญูุงูุฉ ูู ุงููุฌูุงุช ุงูุดุงุฆุนุฉ

### ๐๏ธ ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช

- CRUD ูุงูู ููููุชุฌุงุช ูุน ุฏุนู ุงูุตูุฑ ุงููุชุนุฏุฏุฉ
- ุชุตูููุงุช ุฑุฆูุณูุฉ ููุฑุนูุฉ
- ุงูุนูุงูุงุช ุงูุชุฌุงุฑูุฉ (Brands)
- ูุธุงู ุงูุจุญุซ ูุงูููุชุฑุฉ ุงููุชูุฏู
- Pagination ูุน ุฏุนู ุงูุชุฑุชูุจ

### ๐ ุงูุชุณูู

- ุณูุฉ ุชุณูู ูุชูุงููุฉ
- ูุงุฆูุฉ ุงูุฃูููุงุช (Wishlist)
- ููุจููุงุช ุงูุฎุตู
- ุฅุฏุงุฑุฉ ุงูุนูุงููู

### ๐ณ ุงูุทูุจุงุช ูุงูุฏูุน

- ุฅูุดุงุก ุงูุทูุจุงุช
- ุงูุฏูุน ููุฏุงู ุฃู ุฅููุชุฑูููุงู ุนุจุฑ Stripe
- Stripe Webhooks ููุชุญูู ูู ุงูุฏูุน
- ุชุชุจุน ุญุงูุฉ ุงูุทูุจ ูุงูุชูุตูู

### โญ ุงูุชููููุงุช

- ูุธุงู ุชูููู ุงูููุชุฌุงุช
- ุญุณุงุจ ูุชูุณุท ุงูุชููููุงุช ุชููุงุฆูุงู

---

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

| ุงูุชูููุฉ               | ุงููุตู                   |
| --------------------- | ----------------------- |
| **Node.js**           | ุจูุฆุฉ ุชุดุบูู JavaScript   |
| **Express.js 5**      | ุฅุทุงุฑ ุนูู ุงูููุจ          |
| **MongoDB**           | ูุงุนุฏุฉ ุงูุจูุงูุงุช          |
| **Mongoose**          | ODM ูู MongoDB          |
| **JWT**               | ุงููุตุงุฏูุฉ                |
| **Bcrypt.js**         | ุชุดููุฑ ูููุงุช ุงููุฑูุฑ      |
| **Stripe**            | ุจูุงุจุฉ ุงูุฏูุน             |
| **Multer**            | ุฑูุน ุงููููุงุช             |
| **Sharp**             | ูุนุงูุฌุฉ ุงูุตูุฑ            |
| **Nodemailer**        | ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |
| **Express Validator** | ุงูุชุญูู ูู ุงูุจูุงูุงุช      |

---

## ๐ฆ ุงูุชุซุจูุช

### ุงููุชุทูุจุงุช ุงููุณุจูุฉ

- Node.js (v18+)
- MongoDB
- ุญุณุงุจ Stripe (ููุฏูุน ุงูุฅููุชุฑููู)
- ุญุณุงุจ SMTP (ูุฅุฑุณุงู ุงูุฅููููุงุช - ูุซู Brevo)

### ุฎุทูุงุช ุงูุชุซุจูุช

1. **Clone ุงููุดุฑูุน**

```bash
git clone https://github.com/Youssef-Tamer-Abdelhalim/Backend-EaseShopping-System-.git
cd Backend-EaseShopping-System-
```

2. **ุชุซุจูุช ุงูู Dependencies**

```bash
npm install
```

3. **ุฅุนุฏุงุฏ ููู Environment**

```bash
# ูุณุฎ ููู ุงููุซุงู
cp .env.example .env
```

4. **ุชุนุฏูู ููู `.env`**

```env
PORT=8000
NODE_ENV=development

BASE_URL=http://localhost:8000
FRONTEND_URL=http://localhost:3000

# MongoDB Connection
DB_URI=mongodb://localhost:27017/easeshopping
# ุฃู ุงุณุชุฎุฏู MongoDB Atlas:
# DB_URI=mongodb+srv://username:password@cluster.mongodb.net/easeshopping

# CORS - ุฃุถู origins ูุณููุญ ุจูุง
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# JWT
JWT_SECRET_KEY=your_super_secret_key_here_make_it_long_and_random
JWT_EXPIRE_TIME=90d

# Email (SMTP)
EMAIL_HOST=smtp-relay.brevo.com
EMAIL_PORT=587
EMAIL_USER=your_email@example.com
EMAIL_PASS=your_smtp_password

# Stripe
STRIPE_SECRET=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
```

5. **ุชุดุบูู ุงููุดุฑูุน**

**Development Mode:**

```bash
npm run dev
```

**Production Mode:**

```bash
npm run prod
```

---

## ๐๏ธ ูููู ุงููุดุฑูุน

```
โโโ config/
โ   โโโ database.js          # ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ middleware/
โ   โโโ corsMiddleware.js    # ุฅุนุฏุงุฏุงุช CORS ูุงูุฃูุงู
โ   โโโ errorMiddleware.js   # ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
โ   โโโ uploadImageMiddleware.js  # ุฑูุน ุงูุตูุฑ
โ   โโโ validatorMiddleWare.js    # ุงูุชุญูู ูู ุงูุจูุงูุงุช
โโโ models/
โ   โโโ userModel.js         # ูููุฐุฌ ุงููุณุชุฎุฏู
โ   โโโ productModel.js      # ูููุฐุฌ ุงูููุชุฌ
โ   โโโ categoryModel.js     # ูููุฐุฌ ุงูุชุตููู
โ   โโโ brandModel.js        # ูููุฐุฌ ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ
โ   โโโ cartModel.js         # ูููุฐุฌ ุณูุฉ ุงูุชุณูู
โ   โโโ orderModel.js        # ูููุฐุฌ ุงูุทูุจ
โ   โโโ reviewModel.js       # ูููุฐุฌ ุงูุชูููู
โ   โโโ couponModel.js       # ูููุฐุฌ ุงูููุจูู
โ   โโโ supCategoryModel.js  # ูููุฐุฌ ุงูุชุตููู ุงููุฑุนู
โโโ routes/
โ   โโโ index.js             # ุชุฌููุน ูู ุงูู Routes
โ   โโโ authRoute.js         # ูุณุงุฑุงุช ุงููุตุงุฏูุฉ
โ   โโโ userRoute.js         # ูุณุงุฑุงุช ุงููุณุชุฎุฏููู
โ   โโโ productRoute.js      # ูุณุงุฑุงุช ุงูููุชุฌุงุช
โ   โโโ categoryRoute.js     # ูุณุงุฑุงุช ุงูุชุตูููุงุช
โ   โโโ brandRoute.js        # ูุณุงุฑุงุช ุงูุนูุงูุงุช ุงูุชุฌุงุฑูุฉ
โ   โโโ cartRoute.js         # ูุณุงุฑุงุช ุณูุฉ ุงูุชุณูู
โ   โโโ orderRoute.js        # ูุณุงุฑุงุช ุงูุทูุจุงุช
โ   โโโ ...                  # ุจุงูู ุงููุณุงุฑุงุช
โโโ services/
โ   โโโ authServices.js      # ุฎุฏูุงุช ุงููุตุงุฏูุฉ
โ   โโโ userServices.js      # ุฎุฏูุงุช ุงููุณุชุฎุฏููู
โ   โโโ productServices.js   # ุฎุฏูุงุช ุงูููุชุฌุงุช
โ   โโโ orderServices.js     # ุฎุฏูุงุช ุงูุทูุจุงุช
โ   โโโ handlersFactroy.js   # Factory ููุนูููุงุช ุงููุดุชุฑูุฉ
โ   โโโ ...                  # ุจุงูู ุงูุฎุฏูุงุช
โโโ utils/
โ   โโโ apiError.js          # Custom Error Class
โ   โโโ apiFeatures.js       # Filter, Sort, Paginate
โ   โโโ generateToken.js     # ุฅูุดุงุก JWT Token
โ   โโโ sendEmail.js         # ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
โ   โโโ validator/           # Validators ููุจูุงูุงุช
โโโ uploads/                 # ูุฌูุฏ ุงูุตูุฑ ุงููุฑููุนุฉ
โโโ server.js                # ููุทุฉ ุงูุจุฏุงูุฉ
โโโ package.json
```

---

## ๐ ุงูู API Endpoints

### Base URL

```
http://localhost:8000/api/v1
```

### ๐ Auth

| Method | Endpoint                | ุงููุตู                       |
| ------ | ----------------------- | --------------------------- |
| POST   | `/auth/signup`          | ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ           |
| POST   | `/auth/login`           | ุชุณุฌูู ุงูุฏุฎูู                |
| POST   | `/auth/forgetpassword`  | ุทูุจ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ |
| POST   | `/auth/verifyresetcode` | ุงูุชุญูู ูู ููุฏ ุงูุฅุนุงุฏุฉ       |
| PUT    | `/auth/resetpassword`   | ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ     |

### ๐ค Users

| Method | Endpoint                  | ุงููุตู                      | ุงูุตูุงุญูุฉ |
| ------ | ------------------------- | -------------------------- | -------- |
| GET    | `/users`                  | ุฌูุจ ูู ุงููุณุชุฎุฏููู          | Admin    |
| GET    | `/users/:id`              | ุฌูุจ ูุณุชุฎุฏู ุจุงูู ID         | Admin    |
| POST   | `/users`                  | ุฅูุดุงุก ูุณุชุฎุฏู               | Admin    |
| PUT    | `/users/:id`              | ุชุนุฏูู ูุณุชุฎุฏู               | Admin    |
| DELETE | `/users/:id`              | ุญุฐู ูุณุชุฎุฏู                 | Admin    |
| GET    | `/users/getMe`            | ุฌูุจ ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู | User     |
| PUT    | `/users/updateMe`         | ุชุนุฏูู ุจูุงูุงุชู              | User     |
| PUT    | `/users/updateMyPassword` | ุชุบููุฑ ูููุฉ ุงููุฑูุฑ          | User     |
| DELETE | `/users/deleteMe`         | ุญุฐู ุญุณุงุจู                  | User     |

### ๐ฆ Products

| Method | Endpoint        | ุงููุตู            | ุงูุตูุงุญูุฉ      |
| ------ | --------------- | ---------------- | ------------- |
| GET    | `/products`     | ุฌูุจ ูู ุงูููุชุฌุงุช  | Public        |
| GET    | `/products/:id` | ุฌูุจ ููุชุฌ ุจุงูู ID | Public        |
| POST   | `/products`     | ุฅูุดุงุก ููุชุฌ       | Manager/Admin |
| PUT    | `/products/:id` | ุชุนุฏูู ููุชุฌ       | Manager/Admin |
| DELETE | `/products/:id` | ุญุฐู ููุชุฌ         | Admin         |

### ๐ Categories

| Method | Endpoint          | ุงููุตู             | ุงูุตูุงุญูุฉ      |
| ------ | ----------------- | ----------------- | ------------- |
| GET    | `/categories`     | ุฌูุจ ูู ุงูุชุตูููุงุช  | Public        |
| GET    | `/categories/:id` | ุฌูุจ ุชุตููู ุจุงูู ID | Public        |
| POST   | `/categories`     | ุฅูุดุงุก ุชุตููู       | Manager/Admin |
| PUT    | `/categories/:id` | ุชุนุฏูู ุชุตููู       | Manager/Admin |
| DELETE | `/categories/:id` | ุญุฐู ุชุตููู         | Admin         |

### ๐ Cart

| Method | Endpoint               | ุงููุตู             | ุงูุตูุงุญูุฉ |
| ------ | ---------------------- | ----------------- | -------- |
| GET    | `/my-cart`             | ุฌูุจ ุณูุฉ ุงูุชุณูู    | User     |
| POST   | `/my-cart`             | ุฅุถุงูุฉ ููุชุฌ ููุณูุฉ  | User     |
| DELETE | `/my-cart`             | ุชูุฑูุบ ุงูุณูุฉ       | User     |
| PATCH  | `/my-cart/:itemId`     | ุชุนุฏูู ุงููููุฉ      | User     |
| DELETE | `/my-cart/:itemId`     | ุญุฐู ููุชุฌ ูู ุงูุณูุฉ | User     |
| PATCH  | `/my-cart/applyCoupon` | ุชุทุจูู ููุจูู       | User     |

### ๐ Orders

| Method | Endpoint                           | ุงููุตู                 | ุงูุตูุงุญูุฉ           |
| ------ | ---------------------------------- | --------------------- | ------------------ |
| GET    | `/orders`                          | ุฌูุจ ุทูุจุงุชู            | User/Manager/Admin |
| POST   | `/orders/:cartId`                  | ุฅูุดุงุก ุทูุจ (ููุฏู)      | User               |
| POST   | `/orders/checkout-session/:cartId` | ุฅูุดุงุก ุฌูุณุฉ ุฏูุน Stripe | User               |
| GET    | `/orders/:id`                      | ุฌูุจ ุทูุจ ุจุงูู ID       | Manager/Admin      |
| PATCH  | `/orders/:id/pay`                  | ุชุญุฏูุซ ุญุงูุฉ ุงูุฏูุน      | Manager/Admin      |
| PATCH  | `/orders/:id/deliver`              | ุชุญุฏูุซ ุญุงูุฉ ุงูุชูุตูู    | Manager/Admin      |

> ๐ **ููุชูุงุตูู ุงููุงููุฉ:** ุฑุงุฌุน ููู `FRONTEND_API_DOCS.md`

---

## ๐ ุงูุฃูุงู

- โ ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ุจุงุณุชุฎุฏุงู Bcrypt
- โ JWT ูููุตุงุฏูุฉ ูุน ุงูุชูุงุก ุงูุตูุงุญูุฉ
- โ Rate Limiting (100 ุทูุจ ูู 15 ุฏูููุฉ)
- โ CORS ูุน whitelist ููู origins
- โ Security Headers (X-Frame-Options, X-XSS-Protection, etc.)
- โ ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู (Role-based Access Control)
- โ ุญูุงูุฉ Webhooks

---

## ๐งช ุชุดุบูู Seeder

ูููุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุจูุงูุงุช ุชุฌุฑูุจูุฉ:

```bash
# ุฅุถุงูุฉ ุงูุจูุงูุงุช
node utils/dummyData/seeder.js -i

# ุญุฐู ุงูุจูุงูุงุช
node utils/dummyData/seeder.js -d
```

---

## ๐ ูุชุบูุฑุงุช ุงูุจูุฆุฉ

| ุงููุชุบูุฑ                 | ุงููุตู                | ูุซุงู                           |
| ----------------------- | -------------------- | ------------------------------ |
| `PORT`                  | ุฑูู ุงูุจูุฑุช           | `8000`                         |
| `NODE_ENV`              | ุจูุฆุฉ ุงูุชุดุบูู         | `development` / `production`   |
| `BASE_URL`              | ุฑุงุจุท ุงูู API         | `http://localhost:8000`        |
| `FRONTEND_URL`          | ุฑุงุจุท ุงูู Frontend    | `http://localhost:3000`        |
| `DB_URI`                | ุฑุงุจุท MongoDB         | `mongodb://localhost:27017/db` |
| `CORS_ORIGINS`          | ุงูู Origins ุงููุณููุญุฉ | `http://localhost:3000`        |
| `JWT_SECRET_KEY`        | ููุชุงุญ JWT ุงูุณุฑู      | -                              |
| `JWT_EXPIRE_TIME`       | ูุฏุฉ ุตูุงุญูุฉ Token     | `90d`                          |
| `EMAIL_HOST`            | ุณูุฑูุฑ SMTP           | `smtp-relay.brevo.com`         |
| `EMAIL_PORT`            | ุจูุฑุช SMTP            | `587`                          |
| `EMAIL_USER`            | ุจุฑูุฏ SMTP            | -                              |
| `EMAIL_PASS`            | ูููุฉ ูุฑูุฑ SMTP       | -                              |
| `STRIPE_SECRET`         | ููุชุงุญ Stripe ุงูุณุฑู   | `sk_test_...`                  |
| `STRIPE_WEBHOOK_SECRET` | ููุชุงุญ Webhook        | `whsec_...`                    |

---

## ๐ Deployment

### Railway / Render / Heroku

1. ุฃูุดุฆ ูุดุฑูุน ุฌุฏูุฏ
2. ุงุฑุจุท ุงูู Repository
3. ุฃุถู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
4. ุบููุฑ `NODE_ENV` ุฅูู `production`
5. ุชุฃูุฏ ูู ุฅุถุงูุฉ `CORS_ORIGINS` ุงูุตุญูุญุฉ

### Stripe Webhooks

ูู Productionุ ุฃุถู Webhook URL:

```
https://your-domain.com/webhook-checkout
```

---

## ๐ฅ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช

| ุงูุฏูุฑ       | ุงูุตูุงุญูุงุช                               |
| ----------- | --------------------------------------- |
| **User**    | ุงูุชุตูุญุ ุงูุดุฑุงุกุ ุงูุชููููุ ุฅุฏุงุฑุฉ ุงูุญุณุงุจ   |
| **Manager** | + ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช ูุงูุชุตูููุงุช             |
| **Admin**   | + ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏูููุ ุงูุญุฐูุ ูู ุงูุตูุงุญูุงุช |

---

## ๐ค ุงููุณุงููุฉ

1. Fork ุงููุดุฑูุน
2. ุฃูุดุฆ Branch ุฌุฏูุฏ (`git checkout -b feature/amazing-feature`)
3. Commit ุงูุชุบููุฑุงุช (`git commit -m 'Add amazing feature'`)
4. Push ููู Branch (`git push origin feature/amazing-feature`)
5. ุงูุชุญ Pull Request

---

## ๐ ุงูุฑุฎุตุฉ

ISC License

---

## ๐จโ๐ป ุงููุทูุฑ

**Youssef Tamer Abdelhalim**

- GitHub: [@Youssef-Tamer-Abdelhalim](https://github.com/Youssef-Tamer-Abdelhalim)

---

<div align="center">

โญ **ุฅุฐุง ุฃุนุฌุจู ุงููุดุฑูุนุ ูุง ุชูุณู ุชุนูู Star!** โญ

</div>
